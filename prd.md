项目目标：构建一个高频日内交易的美股交易智能体。

技术栈：
    - 编程语言：python；
    - 数据库：postgresql;
    - 数据源：Massive_API
    - 交易接口：Bronco Trade_Contract_API
    - 模块间的数据格式：json
    - AI大模型：deepseek
    - 测试环境：云服务器linux debian
    - 代码仓库：github + CICD流水线
    - 交易界面：python rich库

项目构成：
    1. 选股模块：
        - 手动设定交易范围：当前目标交易范围是NASDAQ 100
        - 手动设定选股指标，人工撰写postgresql的查询语句；
            - 行情数据：trade、quotes。
            - 行情技术指标：SMA、EMA、RSI、MACD。
            - {策略模块时间频率参数}：10分钟、15分钟、30分钟、60分钟；
        - 每到策略模块时间频率参数，就执行postgresql的查询语句，将结果写入{当前时间戳+时间频率参数}.json文件。
        - 将{当前时间戳+时间频率参数}.json文件传递给策略模块。

    2. Data模块：利用选股模块程式化选择符合要求的股票，将对应时段的行业数据与舆情数据，打包合并发送给策略模块。
        2.1 数据API：{MASSIVE_API_KEY}。
        2.2 采集数据时间频率：每分钟采集一次，秒级数据，写入数据库。休市时间不采集。
        2.3 行情数据：
            - 交易数据有：trade、quotes。
            - 技术指标数据有：SMA、EMA、RSI、MACD。
        2.4 舆情数据。
        2.5 按{采集数据时间频率参数}，将行情数据和舆情数据写入数据库。

    3. 策略模块：接收Data模块的数据，根据人工设定的系统提示词，结合交易模型分析股票的行情数据和舆情数据进行分析和计算，给出交易指令。输出的交易指令严格遵守交易模块的格式要求。
        3.1 人工设定系统提示词：
            - ./prompt/未持仓系统提示词.md
            - ./prompt/持仓系统提示词.md
        3.2 模型使用deepseek的api：
        3.3 要设置 response_format 参数为 {'type': 'json_object'}。必须！
        3.4 大模型输出的交易指令格式为json，json的格式必须符合bronco trade的Contract_API交易指令格式要求。示例如下：

    4. 持仓监控模块：
        4.1 秒级查询委托的状态：未成交、成交、错误等
        4.2 秒级监控持仓的盈亏情况，通过行情数据来计算{持仓盈亏水平}。
        4.3 {按策略模块时间频率参数}将{持仓盈亏水平}与对应股票的行情数据和舆情数据传递给策略模块。
        4.4 策略模块按{持仓系统提示词}进行分析和计算，给出交易指令。

    5. 交易动作模块：
        5.1 交易动作模块：
        接收策略模块的交易指令，解析json，然后通过Bronco Trade_Contract_API下单

    6. 观察与交互模块：
        使用tradingagent的UI界面，观察AI的分析状态、交易动作，以及AI交易的历史记录。





---
顺带一个小优化建议
既然你策略模块真正用的是 10/15/30/60 分钟的特征，可以在 Data / 特征层做一个优化：
原始逐笔（trades/quotes）全部存 PostgreSQL（便于回测）；
另外再建一张“已聚合好的 K 线/特征表”（比如 1 分钟 / 10 分钟 bar），
Data 或特征服务定时从原始表聚合，
策略模块查询时优先读“聚合表”，而不是原始逐笔表。
这样：
原始表可以保留更长时间用于研究；
聚合表体积小、查询快，策略决策时压力更小。